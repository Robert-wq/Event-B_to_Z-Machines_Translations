<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<org.eventb.core.machineFile org.eventb.core.configuration="org.eventb.core.fwd" org.eventb.core.generated="false" org.eventb.texttools.text_lastmodified="1723193145763" org.eventb.texttools.text_representation="machine GuiSM&#10;&#10;sees GuiStates&#10;&#10;variables&#10;&#9;power&#10;&#9;onAC&#10;&#9;batLev&#10;&#9;switchover&#10;&#9;crashed&#10;&#9;modeG&#10;&#9;modeGP&#10;&#9;curTime&#10;&#9;batFail&#10;&#10;invariants&#10;&#9;@inv1 power ∈ BOOL ∧ crashed ∈ BOOL ∧ batLev ∈ batteryRange ∧ curTime ∈ ℕ&#10;&#9;&#9;  ∧ batFail ∈ BOOL&#10;&#9;@inv2 crashed=TRUE ∨ power=FALSE ∨ (onAC=FALSE ∧ (switchover=FALSE ∨  batLev = 0 ∨  batFail=TRUE))&#10;&#9;&#9;  ⇔ modeG=Off&#10;&#9;@inv3 modeG ∈ ModesG ∧ modeGP ∈ ModesG&#10;&#9;@inv4 modeGP ≠ modeG ⇒ modeGP↦modeG ∈ possTransG(bool(power=TRUE ∧ crashed=FALSE ∧&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;    (onAC=TRUE ∨ (switchover=TRUE ∧&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;    batLev&gt;0 ∧ batFail=FALSE))))&#10;&#9;@inv5 modeG = Settings ⇒  modeGP∈{Menu}∪Ventilation&#10;&#10;events&#10;  event INITIALISATION&#10;  &#9;begin&#10;  &#9;&#9;@act1 power ≔ FALSE&#10;  &#9;&#9;@act2 batLev :∈ batteryRange&#10;  &#9;&#9;@act3 onAC ≔ TRUE&#10;  &#9;&#9;@act4 switchover ≔ TRUE&#10;  &#9;&#9;@act5 crashed ≔ FALSE&#10;  &#9;&#9;@act6 modeG ≔ Off&#10;  &#9;&#9;@act7 modeGP ≔  Off&#10;  &#9;&#9;@act8 curTime ≔ 0&#10;  &#9;&#9;@act9 batFail :∈ BOOL&#10;  end&#10;&#10;  event powerON&#10;  &#9;when&#10;  &#9;&#9;@grd1 power = FALSE&#10;  &#9;&#9;@grd2 onAC = TRUE ∨  (switchover=TRUE ∧ batLev&gt;0 ∧ batFail=FALSE)&#10;  &#9;then&#10;  &#9;&#9;@act1 power ≔ TRUE&#10;  &#9;&#9;@act2 modeG ≔ {FALSE ↦ StartUp, TRUE ↦ Off}(crashed)&#10;  &#9;&#9;@act3 modeGP ≔ modeG&#10;  end&#10;&#10;  event powerOff&#10;  &#9;when&#10;  &#9;&#9;@grd1 power = TRUE&#10;  &#9;then&#10;  &#9;&#9;@act1 power ≔ FALSE&#10;  &#9;&#9;@act2 modeG ≔ Off&#10;  &#9;&#9;@act3 modeGP ≔  modeG&#10;  end&#10;&#10;  event startUpEndedGui&#10;  &#9;any&#10;  &#9;&#9;modeg&#10;  &#9;where&#10;  &#9;&#9;@grd1 modeG = StartUp&#10;  &#9;&#9;@grd2 modeg ∈ {Start}∪Ventilation&#10;  &#9;then&#10;  &#9;&#9;@act1 modeG ≔ modeg&#10;  &#9;&#9;@act2 modeGP ≔  modeG&#10;  end&#10;&#10;  event crash&#10;  &#9;when&#10;  &#9;&#9;@grd1 crashed = FALSE&#10;  &#9;then&#10;  &#9;&#9;@act1 crashed ≔  TRUE&#10;  &#9;&#9;@act2 modeG ≔  Off&#10;  &#9;&#9;@act3 modeGP ≔  Off&#10;  end&#10;&#10;  event repare&#10;  &#9;any&#10;  &#9;&#9;modeg&#10;  &#9;where&#10;  &#9;&#9;@grd1 crashed = TRUE&#10;  &#9;&#9;@grd2 power = FALSE ∨  (onAC = FALSE ∧ (switchover = FALSE ∨  batLev = 0 ∨  batFail = TRUE))&#10;  &#9;&#9;&#9;   ⇒ modeg = Off&#10;&#9;&#9;@grd3 power = TRUE ∧ (onAC = TRUE ∨ (switchover = TRUE ∧ batLev&gt;0 ∧ batFail=FALSE))&#10;&#9;&#9;&#9;   ⇒ modeg=StartUp&#10;&#9;then&#10;&#9;&#9;@act1 crashed ≔ FALSE&#10;&#9;&#9;@act2 modeG ≔ modeg&#10;&#9;&#9;@act3 modeGP ≔ modeG&#10;  end&#10;&#10;  event newPatient&#10;  &#9;when&#10;  &#9;&#9;@grd1 modeG = Start&#10;  &#9;then&#10;  &#9;&#9;@act1 modeG ≔ Menu&#10;  &#9;&#9;@act2 modeGP ≔ modeG&#10;  end&#10;&#10;  event resumeVent&#10;  &#9;when&#10;  &#9;&#9;@grd1 modeG = SelfTest&#10;  &#9;then&#10;  &#9;&#9;@act1 modeG ≔ SelfTest&#10;  &#9;&#9;@act2 modeGP ≔ modeG&#10;  end&#10;&#10;  event runAbortSelfTest&#10;  &#9;when&#10;  &#9;&#9;@grd1 modeG = SelfTest&#10;  &#9;then&#10;  &#9;&#9;@act1 modeG ≔ SelfTest&#10;  &#9;&#9;@act2 modeGP ≔ modeG&#10;  end&#10;&#10;  event selfTestPassed&#10;  &#9;when&#10;  &#9;&#9;@grd1 modeG = SelfTest&#10;&#9;then&#10;&#9;&#9;@act1 modeG ≔ Menu&#10;&#9;&#9;@act2 modeGP ≔ modeG&#10;  end&#10;&#10;  event setParam&#10;  &#9;when&#10;  &#9;&#9;@grd1 modeG ∈ {Menu} ∪  Ventilation&#10;&#9;then&#10;&#9;&#9;@act1 modeG ≔ Settings&#10;&#9;&#9;@act2 modeGP ≔  modeG&#10;  end&#10;&#10;  event saveBackAbort&#10;  &#9;any&#10;  &#9;&#9;modeg&#10;  &#9;when&#10;  &#9;&#9;@grd1 modeG = Settings ∧ modeg ∈ ModesG&#10;  &#9;&#9;@grd2 modeg ∈ Ventilation ∪ {Menu}&#10;  &#9;then&#10;  &#9;&#9;@act1 modeG ≔ modeg&#10;  &#9;&#9;@act2 modeGP ≔ modeG&#10;  end&#10;&#10;  event startStopPCVPSV&#10;  &#9;any&#10;  &#9;&#9;modeg&#10;  &#9;where&#10;  &#9;&#9;@grd1 modeG ∈ {Menu} ∪ Ventilation&#10;  &#9;&#9;@grd2 modeg ∈ Ventilation ∪ {Menu}&#10;  &#9;&#9;@grd3 modeG = Menu ⇒  modeg ∈ Ventilation&#10;  &#9;&#9;@grd4 modeG ∈ Ventilation ⇒ modeg = Menu&#10;&#9;then&#10;&#9;&#9;@act1 modeG ≔ modeg&#10;&#9;&#9;@act2 modeGP ≔ modeG&#10;  end&#10;&#10;  event changeMode&#10;  &#9;any&#10;  &#9;&#9;modeg&#10;  &#9;where&#10;  &#9;&#9;@grd1 modeG ∈ Ventilation&#10;  &#9;&#9;@grd2 modeg ∈ Ventilation ∪ {Settings}&#10;&#9;then&#10;&#9;&#9;@act1 modeG ≔  modeg&#10;&#9;&#9;@act2 modeGP ≔ modeG&#10;  end&#10;&#10;  event failExternalPower&#10;  &#9;any&#10;  &#9;&#9;modeg&#10;  &#9;&#9;modegp&#10;  &#9;where&#10;  &#9;&#9;@grd1 onAC = TRUE&#10;  &#9;&#9;@grd2 modeg ∈ ModesG ∧ modegp ∈ ModesG&#10;  &#9;&#9;@grd3 ¬(power = TRUE ∧ crashed=FALSE) ⇒ modeg=Off ∧ modegp=Off&#10;  &#9;&#9;@grd4 power = TRUE ∧ crashed = FALSE ⇒&#10;  &#9;&#9;&#9;  ((switchover=TRUE ∧ batLev&gt;0 ∧ batFail = FALSE ⇒ modeg=modeG ∧ modegp=modeGP) ∧&#10;  &#9;&#9;&#9;  (¬(switchover=TRUE ∧ batLev&gt;0 ∧ batFail = FALSE ⇒ modeg=Off ∧ modegp=modeG)))&#10;  &#9;then&#10;  &#9;&#9;@act1 onAC ≔  FALSE&#10;  &#9;&#9;@act2 modeG ≔ modeg&#10;  &#9;&#9;@act3 modeGP ≔ modegp&#10;  end&#10;&#10;  event progress&#10;  &#9;any&#10;  &#9;&#9;step&#10;  &#9;&#9;l&#10;  &#9;&#9;modeg&#10;  &#9;&#9;batf&#10;  &#9;where&#10;  &#9;&#9;@grd1 step ∈ ℕ1 ∧ l ∈ batteryRange ∧ batf ∈ BOOL&#10;  &#9;&#9;@grd2 batFail = TRUE ⇒  l = batLev&#10;  &#9;&#9;@grd3 onAC = TRUE ∧ batFail=FALSE ⇔ l = batLev + step&#10;  &#9;&#9;@grd4 onAC = FALSE ∧ batFail=FALSE ⇔ l = max({0, batLev − step})&#10;&#9;&#9;@grd5 (onAC=TRUE ∨  (l&gt;0 ∧ switchover=TRUE ∧ batf=FALSE)) ∧&#10;&#9;&#9;&#9;   power=TRUE ∧ modeG=Off ∧ crashed=FALSE&#10;&#9;&#9;&#9;   ⇒&#10;&#9;&#9;&#9;   modeg = StartUp&#10;&#9;&#9;@grd6 (l=0 ∨  batf=TRUE ∨ switchover=FALSE) ∧ onAC=FALSE ⇒ modeg=Off&#10;&#9;&#9;@grd7 onAC=TRUE ∨ ((l&gt;0 ∧ batLev&gt;0) ∧ switchover=TRUE ∧ batf=FALSE)&#10;&#9;&#9;&#9;  ⇒ modeg=modeG&#10;&#9;then&#10;&#9;&#9;@act1 curTime ≔  curTime + step&#10;&#9;&#9;@act2 batLev ≔ l&#10;&#9;&#9;@act3 modeG ≔  modeg&#10;&#9;&#9;@act4 modeGP ≔  {TRUE ↦ modeGP, FALSE ↦ modeG}(bool(modeg=modeG))&#10;&#9;&#9;@act5 batFail ≔  batf&#10;  end&#10;&#10;  event switchoverFail&#10;  &#9;any&#10;  &#9;&#9;modeg&#10;  &#9;where&#10;  &#9;&#9;@grd1 switchover=TRUE&#10;  &#9;&#9;@grd2 onAC=FALSE ⇒ modeg=Off&#10;  &#9;&#9;@grd3 onAC=TRUE ⇒ modeg=modeG&#10;  &#9;then&#10;  &#9;&#9;@act1 switchover ≔ FALSE&#10;  &#9;&#9;@act2 modeG ≔  modeg&#10;  &#9;&#9;@act3 modeGP ≔  {TRUE ↦ modeG, FALSE ↦ modeGP}(bool(modeG≠modeg))&#10;  end&#10;&#10;&#10;&#10;end" version="5">
    <org.eventb.core.seesContext name="_my9YMFWEEe-u-IJanVu1Qg" org.eventb.core.target="GuiStates"/>
    <org.eventb.core.event name="'" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="INITIALISATION">
        <org.eventb.core.action name="_Ja5fwFWJEe-4Btg-4wQ9Ew" org.eventb.core.assignment="power ≔ FALSE" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
        <org.eventb.core.action name="_Ja5fwVWJEe-4Btg-4wQ9Ew" org.eventb.core.assignment="batLev :∈ batteryRange" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
        <org.eventb.core.action name="_Ja5fwlWJEe-4Btg-4wQ9Ew" org.eventb.core.assignment="onAC ≔ TRUE" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
        <org.eventb.core.action name="_Ja5fw1WJEe-4Btg-4wQ9Ew" org.eventb.core.assignment="switchover ≔ TRUE" org.eventb.core.generated="false" org.eventb.core.label="act4"/>
        <org.eventb.core.action name="_Ja5fxFWJEe-4Btg-4wQ9Ew" org.eventb.core.assignment="crashed ≔ FALSE" org.eventb.core.generated="false" org.eventb.core.label="act5"/>
        <org.eventb.core.action name="_Ja5fxVWJEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeG ≔ Off" org.eventb.core.generated="false" org.eventb.core.label="act6"/>
        <org.eventb.core.action name="_Ja5fxlWJEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeGP ≔  Off" org.eventb.core.generated="false" org.eventb.core.label="act7"/>
        <org.eventb.core.action name="_Ja5fx1WJEe-4Btg-4wQ9Ew" org.eventb.core.assignment="curTime ≔ 0" org.eventb.core.generated="false" org.eventb.core.label="act8"/>
        <org.eventb.core.action name="_Ja5fyFWJEe-4Btg-4wQ9Ew" org.eventb.core.assignment="batFail :∈ BOOL" org.eventb.core.generated="false" org.eventb.core.label="act9"/>
    </org.eventb.core.event>
    <org.eventb.core.variable name="_GVApsFWFEe-u-IJanVu1Qg" org.eventb.core.generated="false" org.eventb.core.identifier="power"/>
    <org.eventb.core.variable name="_GVApsVWFEe-u-IJanVu1Qg" org.eventb.core.generated="false" org.eventb.core.identifier="onAC"/>
    <org.eventb.core.variable name="_GVApslWFEe-u-IJanVu1Qg" org.eventb.core.generated="false" org.eventb.core.identifier="batLev"/>
    <org.eventb.core.variable name="_GVAps1WFEe-u-IJanVu1Qg" org.eventb.core.generated="false" org.eventb.core.identifier="switchover"/>
    <org.eventb.core.variable name="_GVAptFWFEe-u-IJanVu1Qg" org.eventb.core.generated="false" org.eventb.core.identifier="crashed"/>
    <org.eventb.core.variable name="_GVAptVWFEe-u-IJanVu1Qg" org.eventb.core.generated="false" org.eventb.core.identifier="modeG"/>
    <org.eventb.core.variable name="_GVAptlWFEe-u-IJanVu1Qg" org.eventb.core.generated="false" org.eventb.core.identifier="modeGP"/>
    <org.eventb.core.variable name="_GVApt1WFEe-u-IJanVu1Qg" org.eventb.core.generated="false" org.eventb.core.identifier="curTime"/>
    <org.eventb.core.variable name="_GVApuFWFEe-u-IJanVu1Qg" org.eventb.core.generated="false" org.eventb.core.identifier="batFail"/>
    <org.eventb.core.invariant name="_GVApuVWFEe-u-IJanVu1Qg" org.eventb.core.generated="false" org.eventb.core.label="inv1" org.eventb.core.predicate="power ∈ BOOL ∧ crashed ∈ BOOL ∧ batLev ∈ batteryRange ∧ curTime ∈ ℕ&#10;&#9;&#9;  ∧ batFail ∈ BOOL"/>
    <org.eventb.core.invariant name="_Z_8RUFWHEe-u-IJanVu1Qg" org.eventb.core.generated="false" org.eventb.core.label="inv2" org.eventb.core.predicate="crashed=TRUE ∨ power=FALSE ∨ (onAC=FALSE ∧ (switchover=FALSE ∨  batLev = 0 ∨  batFail=TRUE))&#10;&#9;&#9;  ⇔ modeG=Off"/>
    <org.eventb.core.invariant name="_0yOBAFWHEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="inv3" org.eventb.core.predicate="modeG ∈ ModesG ∧ modeGP ∈ ModesG"/>
    <org.eventb.core.invariant name="_0yOBAVWHEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="inv4" org.eventb.core.predicate="modeGP ≠ modeG ⇒ modeGP↦modeG ∈ possTransG(bool(power=TRUE ∧ crashed=FALSE ∧&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;    (onAC=TRUE ∨ (switchover=TRUE ∧&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;    batLev&gt;0 ∧ batFail=FALSE))))"/>
    <org.eventb.core.invariant name="_lfhdkFWIEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="inv5" org.eventb.core.predicate="modeG = Settings ⇒  modeGP∈{Menu}∪Ventilation"/>
    <org.eventb.core.event name="_kQFHkFWLEe-4Btg-4wQ9Ew" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="powerON">
        <org.eventb.core.guard name="_ROnBwVWLEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="power = FALSE"/>
        <org.eventb.core.guard name="_ROnBwlWLEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="onAC = TRUE ∨  (switchover=TRUE ∧ batLev&gt;0 ∧ batFail=FALSE)"/>
        <org.eventb.core.action name="_ROnBw1WLEe-4Btg-4wQ9Ew" org.eventb.core.assignment="power ≔ TRUE" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
        <org.eventb.core.action name="_ROnBxFWLEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeG ≔ {FALSE ↦ StartUp, TRUE ↦ Off}(crashed)" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
        <org.eventb.core.action name="_apNT8FWLEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeGP ≔ modeG" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_ww7ZAFWLEe-4Btg-4wQ9Ew" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="powerOff">
        <org.eventb.core.guard name="_ww7ZAVWLEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="power = TRUE"/>
        <org.eventb.core.action name="_ww7ZAlWLEe-4Btg-4wQ9Ew" org.eventb.core.assignment="power ≔ FALSE" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
        <org.eventb.core.action name="_ww7ZA1WLEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeG ≔ Off" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
        <org.eventb.core.action name="_ww7ZBFWLEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeGP ≔  modeG" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_YcRF0FWMEe-4Btg-4wQ9Ew" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="startUpEndedGui">
        <org.eventb.core.parameter name="_YcRF0VWMEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.identifier="modeg"/>
        <org.eventb.core.guard name="_YcRF0lWMEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="modeG = StartUp"/>
        <org.eventb.core.guard name="_YcRF01WMEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="modeg ∈ {Start}∪Ventilation"/>
        <org.eventb.core.action name="_YcRF1FWMEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeG ≔ modeg" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
        <org.eventb.core.action name="_YcRF1VWMEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeGP ≔  modeG" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_slZP4FWPEe-4Btg-4wQ9Ew" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="crash">
        <org.eventb.core.guard name="_slZP4VWPEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="crashed = FALSE"/>
        <org.eventb.core.action name="_slZP4lWPEe-4Btg-4wQ9Ew" org.eventb.core.assignment="crashed ≔  TRUE" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
        <org.eventb.core.action name="_slZP41WPEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeG ≔  Off" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
        <org.eventb.core.action name="_slZP5FWPEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeGP ≔  Off" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_-EaEcFWPEe-4Btg-4wQ9Ew" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="repare">
        <org.eventb.core.parameter name="_-EaEcVWPEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.identifier="modeg"/>
        <org.eventb.core.guard name="_-EaEclWPEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="crashed = TRUE"/>
        <org.eventb.core.guard name="_-EaEc1WPEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="power = FALSE ∨  (onAC = FALSE ∧ (switchover = FALSE ∨  batLev = 0 ∨  batFail = TRUE))&#10;  &#9;&#9;&#9;   ⇒ modeg = Off"/>
        <org.eventb.core.guard name="_nUlBEFWQEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd3" org.eventb.core.predicate="power = TRUE ∧ (onAC = TRUE ∨ (switchover = TRUE ∧ batLev&gt;0 ∧ batFail=FALSE))&#10;&#9;&#9;&#9;   ⇒ modeg=StartUp"/>
        <org.eventb.core.action name="_v3L7UFWQEe-4Btg-4wQ9Ew" org.eventb.core.assignment="crashed ≔ FALSE" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
        <org.eventb.core.action name="_v3L7UVWQEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeG ≔ modeg" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
        <org.eventb.core.action name="_v3L7UlWQEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeGP ≔ modeG" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_-50NAFWQEe-4Btg-4wQ9Ew" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="newPatient">
        <org.eventb.core.guard name="_-50NAVWQEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="modeG = Start"/>
        <org.eventb.core.action name="_-50NAlWQEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeG ≔ Menu" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
        <org.eventb.core.action name="_-50NA1WQEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeGP ≔ modeG" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_Rp5A0FWREe-4Btg-4wQ9Ew" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="resumeVent">
        <org.eventb.core.guard name="_Rp5A0VWREe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="modeG = SelfTest"/>
        <org.eventb.core.action name="_Rp5A0lWREe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeG ≔ SelfTest" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
        <org.eventb.core.action name="_Rp5A01WREe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeGP ≔ modeG" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_y9WlkFWREe-4Btg-4wQ9Ew" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="runAbortSelfTest">
        <org.eventb.core.guard name="_y9WlkVWREe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="modeG = SelfTest"/>
        <org.eventb.core.action name="_y9WlklWREe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeG ≔ SelfTest" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
        <org.eventb.core.action name="_y9Wlk1WREe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeGP ≔ modeG" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_9LktEFWREe-4Btg-4wQ9Ew" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="selfTestPassed">
        <org.eventb.core.guard name="_9LktEVWREe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="modeG = SelfTest"/>
        <org.eventb.core.action name="_9LktElWREe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeG ≔ Menu" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
        <org.eventb.core.action name="_9LktE1WREe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeGP ≔ modeG" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_i5MwAFWSEe-4Btg-4wQ9Ew" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="setParam">
        <org.eventb.core.guard name="_i5MwAVWSEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="modeG ∈ {Menu} ∪  Ventilation"/>
        <org.eventb.core.action name="_i5MwAlWSEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeG ≔ Settings" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
        <org.eventb.core.action name="_i5MwA1WSEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeGP ≔  modeG" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_Uuz4cFWTEe-4Btg-4wQ9Ew" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="saveBackAbort">
        <org.eventb.core.parameter name="_Uuz4cVWTEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.identifier="modeg"/>
        <org.eventb.core.guard name="_Uuz4clWTEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="modeG = Settings ∧ modeg ∈ ModesG"/>
        <org.eventb.core.guard name="_Uuz4c1WTEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="modeg ∈ Ventilation ∪ {Menu}"/>
        <org.eventb.core.action name="_Uuz4dFWTEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeG ≔ modeg" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
        <org.eventb.core.action name="_Uuz4dVWTEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeGP ≔ modeG" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_nHXkIFWTEe-4Btg-4wQ9Ew" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="startStopPCVPSV">
        <org.eventb.core.parameter name="_nHXkIVWTEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.identifier="modeg"/>
        <org.eventb.core.guard name="_nHXkIlWTEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="modeG ∈ {Menu} ∪ Ventilation"/>
        <org.eventb.core.guard name="_nHXkI1WTEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="modeg ∈ Ventilation ∪ {Menu}"/>
        <org.eventb.core.guard name="_nHXkJFWTEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd3" org.eventb.core.predicate="modeG = Menu ⇒  modeg ∈ Ventilation"/>
        <org.eventb.core.guard name="_nHXkJVWTEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd4" org.eventb.core.predicate="modeG ∈ Ventilation ⇒ modeg = Menu"/>
        <org.eventb.core.action name="_sHl8wFWTEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeG ≔ modeg" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
        <org.eventb.core.action name="_sHl8wVWTEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeGP ≔ modeG" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_hpKusFWWEe-4Btg-4wQ9Ew" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="changeMode">
        <org.eventb.core.parameter name="_hpKusVWWEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.identifier="modeg"/>
        <org.eventb.core.guard name="_hpKuslWWEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="modeG ∈ Ventilation"/>
        <org.eventb.core.guard name="_hpKus1WWEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="modeg ∈ Ventilation ∪ {Settings}"/>
        <org.eventb.core.action name="_hpKutFWWEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeG ≔  modeg" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
        <org.eventb.core.action name="_hpKutVWWEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeGP ≔ modeG" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_I7L8kFWXEe-4Btg-4wQ9Ew" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="failExternalPower">
        <org.eventb.core.parameter name="_I7L8kVWXEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.identifier="modeg"/>
        <org.eventb.core.parameter name="_I7L8klWXEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.identifier="modegp"/>
        <org.eventb.core.guard name="_I7L8k1WXEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="onAC = TRUE"/>
        <org.eventb.core.guard name="_I7L8lFWXEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="modeg ∈ ModesG ∧ modegp ∈ ModesG"/>
        <org.eventb.core.guard name="_I7L8lVWXEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd3" org.eventb.core.predicate="¬(power = TRUE ∧ crashed=FALSE) ⇒ modeg=Off ∧ modegp=Off"/>
        <org.eventb.core.guard name="_I7L8llWXEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd4" org.eventb.core.predicate="power = TRUE ∧ crashed = FALSE ⇒&#10;  &#9;&#9;&#9;  ((switchover=TRUE ∧ batLev&gt;0 ∧ batFail = FALSE ⇒ modeg=modeG ∧ modegp=modeGP) ∧&#10;  &#9;&#9;&#9;  (¬(switchover=TRUE ∧ batLev&gt;0 ∧ batFail = FALSE ⇒ modeg=Off ∧ modegp=modeG)))"/>
        <org.eventb.core.action name="_cD1ocFWXEe-4Btg-4wQ9Ew" org.eventb.core.assignment="onAC ≔  FALSE" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
        <org.eventb.core.action name="_cD1ocVWXEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeG ≔ modeg" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
        <org.eventb.core.action name="_cD1oclWXEe-4Btg-4wQ9Ew" org.eventb.core.assignment="modeGP ≔ modegp" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="__KVwwFWaEe-4Btg-4wQ9Ew" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="progress">
        <org.eventb.core.parameter name="__KVwwVWaEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.identifier="step"/>
        <org.eventb.core.parameter name="__KVwwlWaEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.identifier="l"/>
        <org.eventb.core.parameter name="__KVww1WaEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.identifier="modeg"/>
        <org.eventb.core.parameter name="__KVwxFWaEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.identifier="batf"/>
        <org.eventb.core.guard name="__KVwxVWaEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="step ∈ ℕ1 ∧ l ∈ batteryRange ∧ batf ∈ BOOL"/>
        <org.eventb.core.guard name="__KVwxlWaEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="batFail = TRUE ⇒  l = batLev"/>
        <org.eventb.core.guard name="__KVwx1WaEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd3" org.eventb.core.predicate="onAC = TRUE ∧ batFail=FALSE ⇔ l = batLev + step"/>
        <org.eventb.core.guard name="__KVwyFWaEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd4" org.eventb.core.predicate="onAC = FALSE ∧ batFail=FALSE ⇔ l = max({0, batLev − step})"/>
        <org.eventb.core.guard name="_UORdkFWbEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd5" org.eventb.core.predicate="(onAC=TRUE ∨  (l&gt;0 ∧ switchover=TRUE ∧ batf=FALSE)) ∧&#10;&#9;&#9;&#9;   power=TRUE ∧ modeG=Off ∧ crashed=FALSE&#10;&#9;&#9;&#9;   ⇒&#10;&#9;&#9;&#9;   modeg = StartUp"/>
        <org.eventb.core.guard name="_UORdkVWbEe-4Btg-4wQ9Ew" org.eventb.core.generated="false" org.eventb.core.label="grd6" org.eventb.core.predicate="(l=0 ∨  batf=TRUE ∨ switchover=FALSE) ∧ onAC=FALSE ⇒ modeg=Off"/>
        <org.eventb.core.guard name="_8XrIgFYhEe-jVcxkN20UXA" org.eventb.core.generated="false" org.eventb.core.label="grd7" org.eventb.core.predicate="onAC=TRUE ∨ ((l&gt;0 ∧ batLev&gt;0) ∧ switchover=TRUE ∧ batf=FALSE)&#10;&#9;&#9;&#9;  ⇒ modeg=modeG"/>
        <org.eventb.core.action name="_O2vr4FYiEe-jVcxkN20UXA" org.eventb.core.assignment="curTime ≔  curTime + step" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
        <org.eventb.core.action name="_O2vr4VYiEe-jVcxkN20UXA" org.eventb.core.assignment="batLev ≔ l" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
        <org.eventb.core.action name="_O2vr4lYiEe-jVcxkN20UXA" org.eventb.core.assignment="modeG ≔  modeg" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
        <org.eventb.core.action name="_O2vr41YiEe-jVcxkN20UXA" org.eventb.core.assignment="modeGP ≔  {TRUE ↦ modeGP, FALSE ↦ modeG}(bool(modeg=modeG))" org.eventb.core.generated="false" org.eventb.core.label="act4"/>
        <org.eventb.core.action name="_O2vr5FYiEe-jVcxkN20UXA" org.eventb.core.assignment="batFail ≔  batf" org.eventb.core.generated="false" org.eventb.core.label="act5"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_kh80EFYiEe-jVcxkN20UXA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="switchoverFail">
        <org.eventb.core.parameter name="_kh80EVYiEe-jVcxkN20UXA" org.eventb.core.generated="false" org.eventb.core.identifier="modeg"/>
        <org.eventb.core.guard name="_kh80ElYiEe-jVcxkN20UXA" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="switchover=TRUE"/>
        <org.eventb.core.guard name="_kh80E1YiEe-jVcxkN20UXA" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="onAC=FALSE ⇒ modeg=Off"/>
        <org.eventb.core.guard name="_kh80FFYiEe-jVcxkN20UXA" org.eventb.core.generated="false" org.eventb.core.label="grd3" org.eventb.core.predicate="onAC=TRUE ⇒ modeg=modeG"/>
        <org.eventb.core.action name="_kh80FVYiEe-jVcxkN20UXA" org.eventb.core.assignment="switchover ≔ FALSE" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
        <org.eventb.core.action name="_kh80FlYiEe-jVcxkN20UXA" org.eventb.core.assignment="modeG ≔  modeg" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
        <org.eventb.core.action name="_kh80F1YiEe-jVcxkN20UXA" org.eventb.core.assignment="modeGP ≔  {TRUE ↦ modeG, FALSE ↦ modeGP}(bool(modeG≠modeg))" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
    </org.eventb.core.event>
</org.eventb.core.machineFile>
